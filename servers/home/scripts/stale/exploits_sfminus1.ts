import {exposeGameInternalObjects} from "@/servers/home/scripts/lib/exploits";

let ns: NS;
let doc: Document;

// noinspection JSUnusedLocalSymbols
function unclickable() {
  const unclickableDiv = doc.querySelector<HTMLDivElement>("#unclickable")!;
  unclickableDiv.style.display = "block";
  unclickableDiv.style.visibility = "visible";
  unclickableDiv.style.backgroundColor = "red";
  unclickableDiv.addEventListener("click", () => {
    unclickableDiv.style.display = "none";
    unclickableDiv.style.visibility = "hidden";
  });
}

// noinspection JSUnusedLocalSymbols
function undocumented() {
  // @ts-expect-error exploit
  ns.exploit();
}

// noinspection JSUnusedLocalSymbols
function rainbow() {
  // @ts-expect-error exploit
  ns.rainbow("noodles");
}

// noinspection JSUnusedLocalSymbols
function bypass() {
  // @ts-expect-error exploit
  ns.bypass(doc);
}

// noinspection JSUnusedLocalSymbols
function alterReality() {
  // Use browser developer tools to edit source code or value of variable x
}

// noinspection JSUnusedLocalSymbols
function prototypeTampering() {
  const originalFunction = Number.prototype.toExponential;
  Number.prototype.toExponential = function (fractionDigits?: number) {
    return originalFunction.apply(this, [fractionDigits]) + " ";
  };
}

// noinspection JSUnusedLocalSymbols
function timeCompression() {
  const originalFunction = window.setTimeout;
  window.setTimeout = function (handler: TimerHandler, timeout?: number | undefined, ...args: unknown[]): number {
    if (timeout === 15000) {
      timeout = 250;
    }
    return originalFunction.apply(this, [handler, timeout, ...args]);
  };
}

// noinspection JSUnusedLocalSymbols
function trueRecursion() {
  // Make sure you have SF1, then go to Arcade, it will load https://bitburner-official.github.io/bitburner-legacy/
  // Open Developer tools and change line in bundle.js:
  // From: parent.postMessage(__WEBPACK_IMPORTED_MODULE_22__Player_js__["a"].sourceFiles.length > 0, "*")
  // To: parent.postMessage(true, "*")
  // Alternative ways: anything that make Legacy version thinks that you have at least 1 SF. Eg: destroy BN1, edit
  // save file, ...
}

export function main(nsContext : NS): void {
  ns = nsContext
  doc = globalThis['document']

  exposeGameInternalObjects();
  // unclickable();
  // undocumented();
  // rainbow();
  // bypass();
  // prototypeTampering();
  // timeCompression();
}